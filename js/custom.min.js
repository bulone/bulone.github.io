(()=>{AOS.init({duration:600,easing:"ease-in-cublic",once:!0});msemoji.parse(document.body,{base:"https://gcore.jsdelivr.net/gh/DellZHackintosh/msemoji@1.1.2/src/",ext:".svg",folder:"Color",high_contrast:!1});document.body.addEventListener("click",function(a){let e=a.target.closest(".wl-cards a");if(!e)return;let o=e.getAttribute("href");if(!o||o.startsWith("#")||o.startsWith("javascript:")||o.startsWith("mailto:")||o.startsWith("tel:")||o.startsWith("/")||!o.includes("://"))return;let s=new URL(e.href,window.location.href),i=window.location.hostname,n=["bulone.github.io","blog.toastbubble.top","localhost"].some(d=>s.hostname===d||s.hostname.endsWith(`.${d}`)),c=s.hostname===i||s.hostname.endsWith(`.${i}`);if(!n){if(c)return;{a.preventDefault();let d=btoa(e.href);window.open(`/redirect?url=${d}`,"_blank")}}});var l=class{constructor(){this.init()}init(){this.processExistingImages(),this.setupMutationObserver()}processExistingImages(){document.querySelectorAll('img[loading="lazy"]').forEach(o=>{if(o.complete){this.markAsLoaded(o);return}o.addEventListener("load",()=>this.markAsLoaded(o),{once:!0}),o.addEventListener("error",()=>this.markAsLoaded(o),{once:!0})})}setupMutationObserver(){new MutationObserver(o=>{for(let r of o)for(let s of r.addedNodes)s.nodeType===1&&(s.tagName==="IMG"&&s.getAttribute("loading")==="lazy"&&this.handleNewImage(s),s.querySelector&&s.querySelectorAll('img[loading="lazy"]').forEach(t=>this.handleNewImage(t)))}).observe(document.body,{childList:!0,subtree:!0})}handleNewImage(e){if(e.complete){this.markAsLoaded(e);return}e.addEventListener("load",()=>this.markAsLoaded(e),{once:!0}),e.addEventListener("error",()=>this.markAsLoaded(e),{once:!0})}markAsLoaded(e){e.removeAttribute("loading"),e.classList.add("lazy-loaded"),e.classList.remove("lazy-loading")}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>new l,100)}):setTimeout(()=>new l,100);var h=document.getElementById("header-desktop");window.addEventListener("scroll",()=>{h.classList.toggle("scroll-header",window.scrollY>1)});document.addEventListener("DOMContentLoaded",function(){let a=document.querySelectorAll(".theme-btn"),e=document.documentElement;function o(){let t=localStorage.getItem("theme");return t||"auto"}function r(t){if(t==="auto"){let n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";e.setAttribute("data-theme",n)}else e.setAttribute("data-theme",t)}function s(){let t=o();r(t),a.forEach(n=>{n.getAttribute("data-theme")===t?n.classList.add("active"):n.classList.remove("active")})}function i(t,n){t==="auto"?localStorage.removeItem("theme"):localStorage.setItem("theme",t),r(t),a.forEach(c=>{c.classList.remove("active")}),n.classList.add("active")}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(t){if(!localStorage.getItem("theme")){let n=t.matches?"dark":"light";e.setAttribute("data-theme",n)}}),a.forEach(t=>{t.addEventListener("click",function(){let n=this.getAttribute("data-theme");i(n,this)})}),s()});})();
