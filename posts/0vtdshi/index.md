# å¦ç±»è¯´è¯´é¡µ



<!--more-->

æƒ³åœ¨åšå®¢å†…å¢åŠ è¯´è¯´é¡µé¢ï¼Œçœ‹äº†ç½‘ä¸Šè§£å†³æ–¹æ¡ˆä¸€ç§æ˜¯åŠ¨æ€çš„ç±»è¯´è¯´ç¨‹åºåŠ è½½åˆ°åšå®¢å†…ï¼Œä¸€ç§æ˜¯åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„é¡µé¢ï¼Œè¯´è¯´æ•°æ®æ–‡ä»¶è¯»å–åŠ è½½åˆ°æ•°æ®å†…ã€‚å‰è€…èƒ½å¤Ÿéšæ—¶éšåœ°ä»»ä½•è®¾å¤‡ä¸Šè¿›è¡Œç¼–å†™ï¼Œåè€…å¥½åƒä¹Ÿè¡Œä¸è¿‡å‘å¸ƒæ—¶éœ€è¦æ¯æ¬¡éƒ¨ç½²ã€‚å½“ç„¶æ”’ç€ä¹Ÿè¡Œæœ‰æ–°æ–‡ç« å‘å¸ƒæ—¶ä¸€èµ·æ¨é€éƒ¨ç½²ã€‚

å‰è€…å¸¸è§çš„ Memosï¼ŒMonmentsï¼ŒArtitalk ç­‰ï¼Œå°è¯•ä½¿ç”¨ä¸è¿‡éƒ¨åˆ†éœ€è¦ Docker éƒ¨ç½²é‚£ä¹ˆå°±è¦æœ‰å¯¹åº”çš„æœåŠ¡å™¨å»è¿è¡Œäº†ï¼Œå¦‚æœå®¶åº­æœ‰è®¾å¤‡ä¹Ÿå¯ä»¥è¿›è¡Œå†…ç½‘ç©¿é€ã€‚è€ƒè™‘äº†ä¸€ä¸‹è¿˜æœ‰ä¸€ä¸ªéº»çƒ¦çš„ç‚¹åœ¨å›¾ç‰‡çš„å­˜å‚¨ä½ç½®ï¼Œä¹Ÿéœ€è¦å¯¹åº”çš„å­˜å‚¨ç©ºé—´å»è¿›è¡Œï¼Œæ‰€ä»¥ Pass äº†ã€‚

å†æ¥è¯´åè€…ï¼Œä¸€èˆ¬éœ€è¦åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ yml æ–‡ä»¶ï¼Œæ¯æ¬¡å°†å¯¹åº”çš„å†…å®¹æ·»åŠ åˆ°æ–‡ä»¶å†…ã€‚è¿™ç§æ–¹æ¡ˆç¡®å®ç®€å•ï¼Œè·Ÿå‘æ–‡ç« æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ä½†æ˜¯æˆ‘ä½¿ç”¨çš„æ—¶ Obsidian æ¯æ¬¡ç¼–å†™çš„å†…å®¹ï¼Œåªæ”¯æŒæ‰“å¼€ md åç¼€æ–‡ä»¶ï¼Œå¯¹äºå…¶ä»–åç¼€æ–‡ä»¶è¿˜éœ€è¦ç”¨å…¶ä»–ç¨‹åºæ‰“å¼€ç¼–è¾‘ï¼Œèƒ½åœ¨ä¸€ä¸ªè½¯ä»¶å†…å®Œæˆçš„è¿˜æ˜¯å°½é‡åœ¨ä¸€ä¸ªè½¯ä»¶å†…å®Œæˆï¼ŒPassã€‚

åé¢çªå‘å¥‡æƒ³ï¼Œè¯´è¯´å’Œæ—¶é—´çº¿æ²¡å¤šå¤§åŒºåˆ«ï¼Œéƒ½æ˜¯å‘å¸ƒä¸€äº›çŸ­å†…å®¹ï¼Œé‚£ä¹ˆæ¨¡ä»¿ç€åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ç„¶ååœ¨å¯¹æ¯ä¸ªåŒºå—è¿›è¡Œæ¸²æŸ“é‚£ä¸å°±æ˜¯è¯´è¯´äº†ğŸ¤—ï¼Œè¯´å¹²å°±é—® Deepseekï¼Œå¼€æ•´ã€‚

é¦–å…ˆæ¨¡ä»¿ç€åœ¨ layout/\_markup æ–‡ä»¶å¤¹å†…åˆ›å»º render-codeblock-tzone.html æ–‡ä»¶ï¼Œç”¨äºè¯†åˆ«ç¼–è¯‘ mdrkdown ä¸­çš„å¯¹åº”ä»£ç å—ã€‚ç„¶ååœ¨ partial/plugin/tzone.html ç¼–å†™å¯¹åº”å¸ƒå±€ä»£ç ï¼Œè¯»å–å†…å®¹ç„¶åæ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚æœ€ååœ¨ conten ç›®å½•å¤¹å†…å¢åŠ  tzone.md æ·»åŠ å¯¹åº”å†…å®¹ç½‘é¡µè®¿é—®å°±è¡Œã€‚

{{< tabs type="card" >}}  
{{% tab title="render-codeblock-tzone" %}}
```html
{{- dict
  "Options" .Attributes
  "Inner" .Inner
  "Resources" .Page.Resources
  "Position" .Position
  | partial "plugin/tzone.html"
-}}
```
{{% /tab %}}  
{{% tab title="tzone.html" %}}
```html
{{- /* layouts/partials/plugin/tzone.html */ -}}
{{- /* TZone support for code fences extended and shortcodes. */ -}}
{{- $data := .Options.data -}}
{{- $file := .Options.file -}}
{{- $avatar := .Options.avatar | default "/avatar.webp" -}}
{{- $author := .Options.author | default site.Params.author.name -}}
{{- $showDate := .Options.showDate | default true -}}
{{- $showAddress := .Options.showAddress | default true -}}
{{- $showLink := .Options.showLink | default true -}}
{{- $layout := .Options.layout | default "default" -}}

{{- /* Get TZone posts */ -}}
{{- $content := .Inner -}}
{{ with $data }}
  {{- $content = index site.Data.tzone (printf "%v.%v" . page.Language) | default (index site.Data.tzone .) -}}
  {{- if not $content -}}
    {{- warnf "TZone: data not found, please ensure the data file \"data/tzone/%s.{json|yml|yaml|toml}\" exists." . -}}
  {{- end -}}
{{- else -}}
  {{- with dict "Path" $file "Resources" .Resources | partial "function/resource.html" }}
    {{- $content = .Content -}}
  {{- else with $file -}}
    {{- warnf "TZone: no such data file: %s" . -}}
  {{- end -}}
  {{- $content = $content | transform.Unmarshal -}}
{{- end -}}

{{- $posts := $content.posts | default slice -}}
{{- with .Posts -}}
  {{- $posts = . -}}
{{- end -}}
{{- $posts = sort $posts "date" "desc" -}}
{{- if not $posts -}}
  {{- warnf "TZone: posts is empty, executing in file %s" $.Position -}}
{{- end -}}

{{- /* åˆ†é¡µè®¾ç½® */ -}}
{{- $pageSize := 10 -}}
{{- $initialPosts := first $pageSize $posts -}}
{{- $remainingPosts := after $pageSize $posts -}}
{{- $hasMore := gt (len $remainingPosts) 0 -}}


<div class="tzone-container {{ $layout }}">
  {{- /* åˆå§‹æ˜¾ç¤ºçš„å¸–å­ */ -}}
  <div class="tzone-initial-posts">
    {{- range $post := $initialPosts -}}
      {{- if or $post.content (gt (len ($post.images | default slice)) 0) $post.link $post.video -}}
        <div class="tzone-item">
          <!-- Header -->
          <div class="tzone-header">
            <img
              class="avatar lazy-loaded"
              src="{{ $avatar }}"
              alt="{{ $author }}"
            />
            <div class="info">
              <span class="author-name">@{{ $author }}</span>
              {{ if and $showDate $post.date }}
                {{ $dateStr := replace $post.date "å¹´" "-" }}
                {{ $dateStr = replace $dateStr "æœˆ" "-" }}
                {{ $dateStr = replace $dateStr "æ—¥" "" }}
                {{ $dateStr = replace $dateStr "ç‚¹" ":" }}
                {{ $dateStr = replace $dateStr "åˆ†" ":00" }}
                {{ $parsedDate := $dateStr | time.AsTime }}

                {{ $now := now }}
                {{ $today := $now.Format "2006-01-02" }}
                {{ $yesterday := $now.AddDate 0 0 -1 | time.Format "2006-01-02" }}
                {{ $postDate := $parsedDate.Format "2006-01-02" }}
                {{ $postYear := $parsedDate.Format "2006" }}
                {{ $currentYear := $now.Format "2006" }}

                {{ $displayDate := "" }}

                {{ if eq $postDate $today }}
                  {{ $displayDate = printf "ä»Šå¤© %s" ($parsedDate.Format "15:04") }}
                {{ else if eq $postDate $yesterday }}
                  {{ $displayDate = printf "æ˜¨å¤© %s" ($parsedDate.Format "15:04") }}
                {{ else if eq $postYear $currentYear }}
                  {{ $displayDate = $parsedDate.Format "01-02 15:04" }}
                {{ else }}
                  {{ $displayDate = $parsedDate.Format "2006-01-02 15:04" }}
                {{ end }}


                <span class="date">{{ $displayDate }}</span>
              {{ end }}
            </div>
          </div>

          <!-- Content -->
          {{ with $post.content }}
            <p class="tzone-content">{{ . | markdownify }}</p>
          {{ end }}


          <!-- Images -->
          {{- $validImages := slice -}}
          {{ with $post.images }}
            {{ range . }}
              {{ if and . (ne . "") (ne . " ") }}
                {{ $validImages = $validImages | append . }}
              {{ end }}
            {{ end }}
          {{ end }}

          {{ if gt (len $validImages) 0 }}
            <div class="images-container images-count-{{ len $validImages }}">
              {{ range $imagePath := $validImages }}
                <img
                  class="tzone-image"
                  src="{{ $imagePath }}"
                  loading="lazy"
                  alt="{{ $post.date }}"
                  title="{{ $post.date }}"
                />
              {{ end }}
            </div>
          {{ end }}
        </div>
      {{- end -}}
    {{- end -}}
  </div>

  {{- /* åŠ è½½æ›´å¤šåŒºåŸŸ */ -}}
  {{ if $hasMore }}
    <div class="tzone-load-more-area">
      <button class="tzone-load-more-btn" onclick="window.tzoneLoadMore(this)">
        <span class="btn-text">åŠ è½½æ›´å¤š</span>
        <span class="loading-spinner" style="display: none;">åŠ è½½ä¸­...</span>
      </button>
      <div class="tzone-remaining-count">
        è¿˜æœ‰ {{ len $remainingPosts }} æ¡å†…å®¹
      </div>
    </div>

    {{- /* éšè—çš„å‰©ä½™å¸–å­æ•°æ® */ -}}
    <div id="tzone-remaining-data" style="display: none;">
      {{ $remainingPosts | jsonify }}
    </div>
    <div id="tzone-config-data" style="display: none;">
      {{ dict
        "avatar" $avatar
        "author" $author
        "showDate" $showDate
        "showAddress" $showAddress
        "showLink" $showLink
        | jsonify
      }}
    </div>
  {{ end }}
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // åˆå§‹åŒ–åˆå§‹å›¾ç‰‡çš„ ViewImage
    function initViewImage() {
      if (window.ViewImage) {
        ViewImage.init(".tzone-image");
      }
    }

    // é¡µé¢åŠ è½½å®Œæˆåç«‹å³åˆå§‹åŒ–
    initViewImage();
  });
</script>

{{ if $hasMore }}
  <script>
    // ä½¿ç”¨ç®€å•çš„å…¨å±€å‡½æ•°ï¼Œé¿å…å¤æ‚çš„äº‹ä»¶ç›‘å¬å™¨ç®¡ç†
    window.tzoneLoadMore = function (button) {
      // é˜²æ­¢é‡å¤ç‚¹å‡»
      if (button.disabled) return;

      const container = button.closest(".tzone-container");
      const postsContainer = container.querySelector(".tzone-initial-posts");
      const remainingDataEl = document.getElementById("tzone-remaining-data");
      const configDataEl = document.getElementById("tzone-config-data");
      const remainingCount = container.querySelector(".tzone-remaining-count");
      const btnText = button.querySelector(".btn-text");
      const spinner = button.querySelector(".loading-spinner");

      if (!remainingDataEl) return;

      // ç¦ç”¨æŒ‰é’®
      button.disabled = true;
      btnText.style.display = "none";
      spinner.style.display = "inline";

      // è·å–æ•°æ®
      const posts = JSON.parse(remainingDataEl.textContent);
      const config = JSON.parse(configDataEl.textContent);
      const pageSize = 10;

      // åŠ è½½ä¸‹ä¸€æ‰¹å¸–å­
      setTimeout(() => {
        const postsToShow = posts.slice(0, pageSize);
        const newRemainingPosts = posts.slice(pageSize);

        // æ¸²æŸ“æ–°å¸–å­
        postsToShow.forEach((post) => {
          if (
            post.content ||
            (post.images && post.images.length > 0) ||
            post.link ||
            post.video
          ) {
            const postElement = createPostElement(post, config);
            postsContainer.appendChild(postElement);
          }
        });

        // æ›´æ–°å‰©ä½™æ•°æ®
        remainingDataEl.textContent = JSON.stringify(newRemainingPosts);

        // æ›´æ–°å‰©ä½™æ•°é‡æ˜¾ç¤º
        if (remainingCount) {
          if (newRemainingPosts.length > 0) {
            remainingCount.textContent = `è¿˜æœ‰ ${newRemainingPosts.length} æ¡å†…å®¹`;
          } else {
            remainingCount.textContent = "å·²åŠ è½½å…¨éƒ¨å†…å®¹";
            button.style.display = "none";
          }
        }

        // æ¢å¤æŒ‰é’®
        button.disabled = false;
        btnText.style.display = "inline";
        spinner.style.display = "none";
      }, 300);
    };

    // åˆ›å»ºå¸–å­å…ƒç´ çš„å‡½æ•°
    function createPostElement(post, config) {
      const div = document.createElement("div");
      div.className = "tzone-item";

      let html = `
    <div class="tzone-header">
      <img class="avatar lazy-loaded" src="${config.avatar}" alt="${config.author}" />
      <div class="info">
        <span class="author-name">@${config.author}</span>
  `;

      if (config.showDate && post.date) {
        html += `<span class="date">${post.date}</span>`;
      }

      html += `</div></div>`;

      if (post.content) {
        html += `<p class="tzone-content">${post.content}</p>`;
      }

      // å¤„ç†å›¾ç‰‡
      if (post.images && post.images.length > 0) {
        const validImages = post.images.filter(
          (img) => img && img !== "" && img !== " ",
        );
        if (validImages.length > 0) {
          html += `<div class="images-container images-count-${validImages.length}">`;
          validImages.forEach((imgPath) => {
            html += `<img src="${imgPath}" alt="${imgPath}" class="tzone-image" loading="lazy" />`;
          });
          html += "</div>";
        }
      }

      div.innerHTML = html;
      return div;
    }
  </script>
{{ end }}
```
{{% /tab %}}  
{{< /tabs >}}

ä½¿ç”¨æ–¹æ³•å°±æ˜¯æ™®é€šä»£ç å—åé¢å¢åŠ  tzoneï¼Œå†…éƒ¨æ ¼å¼å¦‚ä¸‹ã€‚content ä¸­æ”¯æŒ markdown æ ¼å¼  
```yaml
posts:
  - content: " ç®€æ˜“è¯´è¯´é¡µé¢æ­å»ºå®Œæˆã€‚"  
    date: 2025 å¹´ 11 æœˆ 21 æ—¥ 11 ç‚¹ 11 åˆ†  
    images: 
      - /avatar.webp
```

é‡‡å–çš„ç­–ç•¥æ˜¯æ¯æ¬¡é¡µé¢æ˜¾ç¤ºåæ¡è¯´è¯´ï¼Œé¿å…å¤ªå¤šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚è¯¥é¡µé¢çš„å›¾ç‰‡ä½¿ç”¨ ViewImageJS åº“ï¼Œå› ä¸º lightgallery åº“æ‰“å¼€ååº•éƒ¨å°†æ‰€æœ‰å›¾ç‰‡ç¼©ç•¥å›¾éƒ½æ˜¾ç¤ºå‡ºæ¥å¾ˆæ‚ã€‚åœ¨ä¸»é¢˜é…ç½®ä¸­å¢åŠ å¯¹åº”åº“é“¾æ¥ï¼Œjs ä»£ç åœ¨ä¸Šè¿° html ä»£ç ä¸­æœ‰ä½“ç°ã€‚  
![ç‚¹å‡»æ”¾å¤§æ•ˆæœ](images/index-1763696531516.webp "æ”¾å¤§æ•ˆæœ")

æ„Ÿè§‰è¿™ç§æ–¹æ¡ˆä¼šå¢åŠ æ€§èƒ½æ¶ˆè€—ï¼ŒåŠ è½½æ­¤é¡µé¢ç¬”è®°æœ¬çš„é£æ‰‡å‘¼å‘¼çš„è½¬ï¼Œåç»­å¦‚æœæœ‰é—®é¢˜åœ¨é‡‡ç”¨å…¶ä»–æ–¹æ¡ˆå§ï¼Œæ¯•ç«Ÿæ•°æ®èµ„æºéƒ½åœ¨æœ¬åœ°ä¹Ÿå¥½è¿›è¡Œè½¬ç§»æ“ä½œã€‚ğŸ¥±




---

> ä½œè€…: bulone  
> URL: https://blog.toastbubble.top/posts/0vtdshi/  

