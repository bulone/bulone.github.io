# Fixitä¸»é¢˜ç¾åŒ–


<!--more-->
==æœ¬æ–‡ç« ä»£ç éƒ¨åˆ†å†…å®¹ä½¿ç”¨ AI è¾…åŠ©åˆ›ä½œ==[danger]

å®‰è£…åšå®¢ä¹Ÿä¸€æœˆæœ‰ä½™ï¼ŒæœŸé—´ä¹Ÿæ‹œè®¿è¿‡å…¶ä»–åšå®¢ç«™ï¼Œå½“ç„¶æ˜¯å› ä¸ºæœç´¢çŸ¥è¯†è¿›è¡Œæ‹œè®¿ã€‚å¯¹äºä¸»é¢˜çš„ä¸€äº›å†…å®¹è¿›è¡Œè‡ªå®šä¹‰å¹¶å®Œå–„ã€‚

**æ³¨ï¼šæ¶‰åŠåˆ° html ä¿®æ”¹éƒ¨åˆ†è¯·å°†æ‰€éœ€ä¿®æ”¹æ–‡ä»¶å¤åˆ¶ä¸€ä»½åˆ°ä¸»é¢˜å¤–ç›¸åŒä½ç½®ï¼Œä¿®æ”¹åæ—¢èƒ½åº”ç”¨ä¹Ÿèƒ½ä¸ç ´ååŸä¸»é¢˜æ–‡ä»¶ã€‚**

## CSS æ ·å¼
å¯¹äºä¸»é¢˜ CSS å‚æ•°ï¼Œå¯ä»¥åœ¨ `assets/css` ä¸­åˆ›å»º `_override.scss` è¿›è¡Œè®¾ç½®ï¼Œä¼šè¿›è¡Œè¦†ç›–ã€‚  å…¶ä»–æ ·å¼å¯ä»¥åœ¨åŒæ–‡ä»¶å¤¹å†…åˆ›å»º `_custom.scss` è¿›è¡Œç¼–å†™ã€‚  

æœ¬åšå®¢ä½¿ç”¨çš„æ˜¯ä¸ªäººå…è´¹ä½¿ç”¨çš„ [OPPO Sans4.0](https://www.coloros.com/article/A00000074/) å­—ä½“ï¼Œä¸»è¦å–œæ¬¢è¿™ä¸ªå­—ä½“çš„æ•°å­—éƒ¨åˆ†ã€‚åˆ©ç”¨ [ä¸­æ–‡ç½‘å­—è®¡åˆ’ç½‘ç«™](https://chinese-font.netlify.app/zh-cn/) è¿›è¡Œå­—ä½“åˆ†åŒ…ï¼Œåœ¨ä½¿ç”¨å­—ä½“åä¸å½±å“ç½‘ç«™è®¿é—®é€Ÿåº¦ã€‚
## é¦–é¡µåˆ—è¡¨éƒ¨åˆ†

åŸä¸»é¢˜çš„é¦–é¡µåˆ—è¡¨éƒ¨åˆ†æ˜¯æ¯è¡Œä¸€ä¸ªï¼Œåˆ—æ’å¸ƒã€‚æ²¡æœ‰å°é¢å›¾è¿˜å¥½ï¼Œå¦‚æœæœ‰å°é¢å›¾å› ä¸ºæ¯”ä¾‹æ˜¾ç¤ºä¸º 2:1ï¼Œæ‰€ä»¥åœ¨å±å¹•ä¸Šä¼šæ˜¾å¾—å¾ˆå¤§ï¼Œé‚£ä¹ˆä¸€é¡µä¸‹æ¥ä¹Ÿæ˜¾ç¤ºä¸äº†å‡ å¼ å›¾ç‰‡ã€‚å¶ç„¶è¿›å…¥ [Atpx](https://atpx.com/blog/) çš„ç©ºé—´ï¼Œå‘ç°å…¶åšå®¢é¡µå¾ˆç®€çº¦æ•´é½ï¼ŒåŒåˆ—æ’å¸ƒæ–‡ç« ï¼Œæ¯ä¸ªæ–‡ç« å—ä¹Ÿå¾ˆå°ã€‚æ‰€ä»¥å°±å€Ÿé‰´äº†å…¶æ ·å¼å†…å®¹ï¼Œä¸ºäº†ä¸åŒå®½åº¦è®¾å¤‡æ•´ä¸ªå—æ¯”ä¾‹é€‚å½“ï¼Œæ‰€ä»¥ä¹Ÿé¡ºåŠ¿è°ƒæ•´äº†å›¾ç‰‡çš„å®½é«˜æ¯”è¾¾åˆ°åˆé€‚ç¨‹åº¦ã€‚  

æ–‡ä»¶ä½ç½®ï¼š
- layouts/\_default/home.html & summary.html 
- layouts/partials/single/post-included-in.html

![æ–‡ç« åˆ—è¡¨å›¾](./images/index-1742907969794.webp  "æ–‡ç« åˆ—è¡¨å›¾")
## æ–‡ç« é¡µ
ä¸»è¦åˆ é™¤äº†ä½œè€…ä¿¡æ¯ï¼Œå…¶ä½™æœªä½œå˜åŒ–ã€‚  
æ–‡ä»¶ä½ç½®ï¼šlayouts/post/single.html

![æ–‡ç« é¡µé¡¶éƒ¨](./images/index-1742908689762.webp "è°ƒæ•´ä½ç½®")

## MSEmojiğŸ‰

![é¡¹ç›®å®£ä¼ å›¾](./images/index-1742908925710.webp  "è¡¨æƒ…å±•ç¤º")  
ä¸»é¢˜è‡ªå¸¦æœ‰ Twemojiï¼Œå¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­é€‰æ‹©å¼€å¯ã€‚ä¸è¿‡æˆ‘å¼€å¯åè¿˜æ˜¯åŠ è½½å¤±è´¥ï¼Œæ‰€ä»¥è¿˜æ˜¯æŠŠä»–å…³é—­äº†ã€‚å¾ˆå–œæ¬¢å¾®è½¯çš„è¡¨æƒ…ï¼Œåœ¨ Github ä¸Šæœç´¢ç±»ä¼¼ Twemoji çš„é¡¹ç›®ï¼Œæœ€ç»ˆæ‰¾å¯»è¯¥é¡¹ç›®ç¬¦åˆã€‚  

{{< link "https://github.com/DellZHackintosh/msemoji"  "Msemoji" " åŸºäº Twemoji ä¿®æ”¹çš„å¾®è½¯é£æ ¼è¡¨æƒ… Emojiã€‚"   true >}}

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. åœ¨é…ç½®æ–‡æ¡£ä¸­æœç´¢ `params.page.library.js`ï¼Œåœ¨å…¶å†…éƒ¨æ·»åŠ   
   msemojijs = "https://unpkg.com/msemoji@1.1.2/dist/msemoji.min.js"
2. åˆ›å»º `custom.js`ï¼Œä½ç½®åœ¨ `assets/js/`
```js
msemoji.parse(document.body,{
    base: "https://gcore.jsdelivr.net/gh/DellZHackintosh/msemoji@1.1.2/src/",
    ext: ".svg", 
    folder: "Color"
  });
```

| base   | ext   | folder |
| ------ | ----- | ------ |
| è¡¨æƒ…ä»“åº“ä½ç½® | è¡¨æƒ…æ‹“å±•å | è¡¨æƒ…æ‰€åœ¨ç›®å½• |

ä¸»è¦è¿™ä¸‰ä¸ªå‚æ•°å³å¯ï¼Œå¦‚æœè¿˜æƒ³è¦å…¶ä»–å‚æ•°é…ç½®ï¼Œè¯·å‚è€ƒåŸæ–‡æ¡£ã€‚

## Waline è¯„è®ºç³»ç»Ÿ
åšå®¢ä½¿ç”¨çš„æ˜¯ Walineï¼Œå› ä¸ºå°±å®ƒå¸¦æœ‰æ–‡ç«  Reactionï¼Œå¯ä»¥è‡ªå®šä¹‰å›¾ç‰‡ã€‚å…¶ä»–çš„å‡ ä¸ªè¯„è®ºç³»ç»Ÿéƒ½å¤§å·®ä¸å·®ã€‚ä½¿ç”¨æ–¹æ³•è¯·åˆ° [Walineå®˜ç½‘](https://waline.js.org/) é…ç½®å‚æ•°ã€‚
### ä¸ªæ€§åŒ–Walineé‚®ä»¶æ¨¡æ¿
> æ–°å›å¤æ¨¡æ¿

```html {title="MAIL_TEMPLATE"}
<style>.container{max-width:100%;background:#fff;border-radius:24px;overflow:hidden;margin-block:25px}.header{padding:30px 32px 20px;background:#f8fafc;text-align:center;border-bottom:1px solid #f1f3f4}.header-content{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:12px}.logo{width:32px;height:32px}.site-name{margin:0;font-size:28px;font-weight:700;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.notification{color:#666;font-size:16px;font-weight:500}.content{padding-block:32px}.chat-container{display:flex;flex-direction:column;gap:16px}.message{display:flex;max-width:85%}.your-message{align-self:flex-end}.reply-message{align-self:flex-start}.bubble{padding:16px 20px;border-radius:24px;line-height:1.5;font-size:15px}.your-bubble{background:#f0f4ff;color:#334155;border-bottom-right-radius:8px}.reply-bubble{background:#f0f4ff;color:#334155;border-bottom-left-radius:8px}.user-info{font-size:12px;margin-bottom:6px;font-weight:600}.your-message .user-info{color:#667eea}.reply-message .user-info{color:#667eea}.you-tag{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:2px 8px;border-radius:10px;font-size:11px;margin-left:6px}.action{text-align:center;margin-top:60px}.btn{display:inline-flex;align-items:center;gap:8px;padding:16px 24px;background:#f0f4ff;color:#667eea;text-decoration:none;border-radius:16px;font-weight:600;font-size:16px;transition:all .3s ease}.btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(102,126,234,.4)}.footer{padding:32px;text-align:center;background:#f8fafc;color:#718096;font-size:14px;line-height:1.6;border-top:1px solid #e2e8f0}.footer a{color:#667eea;text-decoration:none;font-weight:600}.wl-emoji{display:inline-block;vertical-align:baseline;height:1.25em;margin:-.125em .25em}</style><div class=container><div class=header><div class=header-content><img src=https://blog.toastbubble.top/logo.svg alt=logo class=logo /> <h1 class=site-name>{{site.name|safe}}</h1></div><div class=notification>ğŸ””å˜¿ï¼Œæ‚¨æ”¶åˆ°äº†ä¸€æ¡æ–°çš„å›å¤ï¼</div></div><div class=content><div class=chat-container><div class="message your-message"><div class="bubble your-bubble"><div class=user-info>{{parent.nick|safe}}<span class=you-tag>æ‚¨</span></div><div class=message-text>{{parent.comment|safe}}</div></div></div><div class="message reply-message"><div class="bubble reply-bubble"><div class=user-info>{{self.nick|safe}}</div><div class=message-text>{{self.comment|safe}}</div></div></div></div><div class=action><a href={{site.postUrl}} class=btn>æŸ¥çœ‹è¯¦æƒ…</a></div></div><div class=footer>æ­¤é‚®ä»¶ç”±ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºï¼Œå›å¤æ— æ•ˆã€‚<br />Â©ï¸ <a href={{site.url}}>{{site.name|safe}}</a></div></div>
```

> ç®¡ç†å‘˜æ–°è¯„è®ºæ¨¡æ¿
```html {title="MAIL_TEMPLATE_ADMIN"}
<style>.container{max-width:100%;background:#fff;border-radius:24px;overflow:hidden;margin-block:25px}.header{padding:30px 32px 20px;background:#f8fafc;text-align:center;border-bottom:1px solid #f1f3f4}.header-content{display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:12px}.logo{width:32px;height:32px}.site-name{margin:0;font-size:28px;font-weight:700;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.notification{color:#666;font-size:16px;font-weight:500}.content{padding-block:32px}.chat-container{display:flex;flex-direction:column;gap:16px}.message{display:flex;max-width:85%}.your-message{align-self:flex-end}.reply-message{align-self:flex-start}.bubble{padding:16px 20px;border-radius:24px;line-height:1.5;font-size:15px}.your-bubble{background:#f0f4ff;color:#334155;border-bottom-right-radius:8px}.reply-bubble{background:#f0f4ff;color:#334155;border-bottom-left-radius:8px}.user-info{font-size:12px;margin-bottom:6px;font-weight:600}.your-message .user-info{color:#667eea}.reply-message .user-info{color:#667eea}.you-tag{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:2px 8px;border-radius:10px;font-size:11px;margin-left:6px}.action{text-align:center;margin-top:60px}.btn{display:inline-flex;align-items:center;gap:8px;padding:16px 24px;background:#f0f4ff;color:#667eea;text-decoration:none;border-radius:16px;font-weight:600;font-size:16px;transition:all .3s ease}.btn:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(102,126,234,.4)}.footer{padding:32px;text-align:center;background:#f8fafc;color:#718096;font-size:14px;line-height:1.6;border-top:1px solid #e2e8f0}.footer a{color:#667eea;text-decoration:none;font-weight:600}.wl-emoji{display:inline-block;vertical-align:baseline;height:1.25em;margin:-.125em .25em}</style><div class=container><div class=header><div class=header-content><img src=https://blog.toastbubble.top/logo.svg alt=logo class=logo /> <h1 class=site-name>{{site.name|safe}}</h1></div><div class=notification>ğŸ””å˜¿ï¼Œæ‚¨æ”¶åˆ°äº†ä¸€æ¡æ–°è¯„è®ºï¼</div></div><div class=content><div class=chat-container><div class="message reply-message"><div class="bubble reply-bubble"><div class=user-info>{{self.nick|safe}}</div><div class=message-text>{{self.comment|safe}}</div></div></div></div><div class=action><a href={{site.postUrl}} class=btn>æŸ¥çœ‹è¯¦æƒ…</a></div></div><div class=footer>æ­¤é‚®ä»¶ç”±ç³»ç»Ÿè‡ªåŠ¨å‘å‡ºï¼Œå›å¤æ— æ•ˆã€‚<br />Â©ï¸ <a href={{site.url}}>{{site.name|safe}}</a></div></div>
```

æ·»åŠ åˆ°ç¯å¢ƒå˜é‡å†…ï¼Œå¦‚æœç¯å¢ƒå˜é‡è®¾ç½®çš„urlå¸¦https://ï¼Œé‚£ä¹ˆæ¨¡æ¿ä¸­ä¸éœ€è¦æ·»åŠ ï¼Œåä¹‹æ·»åŠ ï¼Œæ€»ä¹‹è§†æƒ…å†µè€Œå®šã€‚
{{< muti-image >}}
![ç½‘æ˜“é‚®ç®±ç½‘é¡µç«¯ç¤ºä¾‹](images/index1762744144661.webp)
![ç½‘æ˜“é‚®ç®±æ‰‹æœºç«¯æ–°è¯„è®ºç¤ºä¾‹](images/index-1762744168688.webp)
![ç½‘æ˜“é‚®ç®±æ–°å›å¤ç¤ºä¾‹](images/index-1762744193229.webp)
{{< /muti-image>}}
## ç…§ç‰‡æ‡’åŠ è½½èƒŒæ™¯å›¾é—®é¢˜
![åŠ è½½å®Œæˆä¾æ—§æ˜¾ç¤ºåŠ è½½å›¾ç‰‡](./images/index-1762336550071.webp "åŠ è½½å®Œæˆä¾æ—§æ˜¾ç¤ºåŠ è½½å›¾ç‰‡")
äº§ç”ŸåŸå› ï¼šå› ä¸ºå›¾ç‰‡è®¾ç½®æ‡’åŠ è½½å±æ€§ï¼Œcss æ–‡ä»¶ä¸­é’ˆå¯¹è¯¥å±æ€§å¢åŠ åŠ è½½ loading èƒŒæ™¯å›¾ç‰‡ï¼Œå¯¼è‡´å³ä½¿åŠ è½½å®Œæˆåä¾æ—§æ˜¾ç°ã€‚å¯¹äºå¤§å›¾ç‰‡è¿˜å¥½ï¼Œloading åŠ è½½å›¾ç‰‡å°ºå¯¸ä¸å¤§ï¼Œå› æ­¤ä¼šè¢«é®æŒ¡ï¼Œå°å›¾ç‰‡å°±ä¼šå‡ºç°ä¸Šè¿°ç°è±¡ã€‚  
è§£å†³æ–¹æ¡ˆï¼šå¢åŠ  js åˆ¤æ–­æ˜¯å¦åŠ è½½å®Œæˆï¼Œå®Œæˆåç§»é™¤è¯¥å±æ€§ã€‚  
```javascript
/**
 * æ‡’åŠ è½½å›¾ç‰‡å¤„ç†å™¨
 * ç›‘æ§æ‡’åŠ è½½å›¾ç‰‡çš„åŠ è½½çŠ¶æ€ï¼Œå®Œæˆåç§»é™¤loading="lazy"å±æ€§
 */
class LazyImageHandler {
    constructor() {
        this.init();
    }

    init() {
        this.processExistingImages();
        this.setupMutationObserver();
    }

    /**
     * å¤„ç†ç°æœ‰å›¾ç‰‡
     */
    processExistingImages() {
        const lazyImages = document.querySelectorAll('img[loading="lazy"]');
        
        lazyImages.forEach(img => {
            // å¦‚æœå›¾ç‰‡å·²ç»åŠ è½½å®Œæˆï¼ˆæ¥è‡ªç¼“å­˜ï¼‰
            if (img.complete) {
                this.markAsLoaded(img);
                return;
            }
            
            // ç›‘å¬åŠ è½½äº‹ä»¶
            img.addEventListener('load', () => this.markAsLoaded(img), { once: true });
            img.addEventListener('error', () => this.markAsLoaded(img), { once: true });
        });
    }

    /**
     * è®¾ç½®è½»é‡çº§MutationObserverç›‘å¬æ–°å›¾ç‰‡
     */
    setupMutationObserver() {
        const observer = new MutationObserver((mutations) => {
            for (const mutation of mutations) {
                for (const node of mutation.addedNodes) {
                    if (node.nodeType === 1) {
                        // ç›´æ¥æ˜¯å›¾ç‰‡å…ƒç´ 
                        if (node.tagName === 'IMG' && node.getAttribute('loading') === 'lazy') {
                            this.handleNewImage(node);
                        }
                        // å®¹å™¨å†…çš„å›¾ç‰‡
                        if (node.querySelector) {
                            const newImages = node.querySelectorAll('img[loading="lazy"]');
                            newImages.forEach(img => this.handleNewImage(img));
                        }
                    }
                }
            }
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    }

    /**
     * å¤„ç†æ–°æ·»åŠ çš„æ‡’åŠ è½½å›¾ç‰‡
     */
    handleNewImage(img) {
        if (img.complete) {
            this.markAsLoaded(img);
            return;
        }

        img.addEventListener('load', () => this.markAsLoaded(img), { once: true });
        img.addEventListener('error', () => this.markAsLoaded(img), { once: true });
    }

    /**
     * æ ‡è®°å›¾ç‰‡ä¸ºå·²åŠ è½½ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
     */
    markAsLoaded(img) {
        img.removeAttribute('loading');
        img.classList.add('lazy-loaded');
        img.classList.remove('lazy-loading');
    }
}

// å»¶è¿Ÿåˆå§‹åŒ–ï¼Œé¿å…å½±å“é¦–å±åŠ è½½
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => new LazyImageHandler(), 100);
    });
} else {
    setTimeout(() => new LazyImageHandler(), 100);
}

```
## AOS åŠ¨ç”»åº“

æ»‘åŠ¨åŠ¨ç”»åº“ï¼Œä¾èµ–äº Jqueryã€‚  
åœ¨ `hugo.toml` ä¸­çš„ [params.page.library] åŠ å…¥æ‰€éœ€ CSSï¼ŒJs æ–‡ä»¶ã€‚ç„¶åå† _custom.js ä¸­æ·»åŠ 
```js
AOS.init({
	once:true,
	duration: 400,
	delay: 0,
});
```
init å†…å¯ä»¥è‡ªé€‰å‚æ•°åˆå§‹åŒ–ã€‚
## ç›¸å…³é“¾æ¥

1. æ–‡ç«  Reaction è¡¨æƒ…ï¼š[Animated-Fluent-Emojis](https://github.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis)
2. è¾…åŠ©ç”Ÿæˆæ ·å¼ä»£ç ï¼š[Deepseek](https://www.deepseek.com)
3. AOS åŠ¨ç”»åº“ä½¿ç”¨ï¼š[å‰ç«¯ç‚«é…·çš„åŠ¨ç”»æ•ˆæœåº“--AOSä½¿ç”¨è¯¦è§£\_aos-easing-CSDNåšå®¢](https://blog.csdn.net/weixin_45277161/article/details/112302569)
4. AOS åŠ¨ç”»åº“æ’ä»¶ï¼š[æ’ä»¶ ï½œ AOS æ»šåŠ¨åŠ¨ç”»åº“aos.js - æ˜é‡‘](https://juejin.cn/post/7018850667653496839)

---

> ä½œè€…: åå¸æ°”æ³¡  
> URL: https://blog.toastbubble.top/posts/aa6eb19/  

